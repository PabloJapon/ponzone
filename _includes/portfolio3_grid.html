<!-- Portfolio 3 Grid -->
{% if site.locale and site.locale != "" and site.locale != nil %}
<section class="bg-light page-section" id="{{ site.data.sitetext.portfolio3.section | default: "portfolio3" }}" style="background-color: #212529 !important;">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">{{ site.data.sitetext[site.locale].portfolio3.title | markdownify | default: "Portfolio 3" }}</h2>
        <h3 class="section-subheading text-muted">{{ site.data.sitetext[site.locale].portfolio3.text | markdownify }}</h3>
      </div>
    </div>
    <div class="row" style="flex-direction: column;">
      {% if site.portfolio3 != nil and site.portfolio3.size > 0 %}
        {% for project in site.portfolio3 %}
          <div class="col-md-4 col-sm-6 portfolio-item" style="display: flex; align-items: center; max-width: 100%;">
            {% if forloop.index0 % 2 == 0 %}
              <!-- Even projects: Caption on the left, Image on the right -->
              <div class="portfolio-caption" style="display: flex; flex-direction: column; text-align: center; margin-right: 20px;">
                <h4 style="color: #f8f9fa !important;">{{ project.caption.title }}</h4>
                <p class="text-muted" style="color: #f8f9fa !important;">{{ project.caption.subtitle }}</p>
              </div>
              <img class="img-fluid" src="{{ project.caption.thumbnail }}" alt="" style="margin: 1em 4em 1em 0; border-radius: 40px; max-width: 40%;">
            {% else %}
              <!-- Odd projects: Caption on the right, Image on the left -->
              <img class="img-fluid" src="{{ project.caption.thumbnail }}" alt="" style="margin: 1em 4em 1em 0; border-radius: 40px; max-width: 40%;">
              <div class="portfolio-caption" style="display: flex; flex-direction: column; text-align: center; margin-left: 20px;">
                <h4 style="color: #f8f9fa !important;">{{ project.caption.title }}</h4>
                <p class="text-muted" style="color: #f8f9fa !important;">{{ project.caption.subtitle }}</p>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      {% else %}
        <p>No portfolio items found in site.portfolio3.</p>
      {% endif %}
    </div>
  </div>
</section>
{% else %}
  <p>Locale is not set or empty.</p>
{% endif %}
{% include modals3.html %} 
